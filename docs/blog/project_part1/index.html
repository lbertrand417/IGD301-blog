<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage"><head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link rel="icon" href="/favicon.svg">

  <title>
    Project Part 1 - IGD301 - Blog
  </title>
  <meta name="description" content="Locomotion technique: Teleportation ball" /><meta name="generator" content="Hugo 0.91.1" /><link
    rel="stylesheet"
    href="https://lbertrand417.github.io/IGD301-blog/css/styles.min.0329d07cf5e07cd52141990c36f0feb8332eddb71a5c450ee2d65d94eedccf7d.css"
    integrity="sha256-AynQfPXgfNUhQZkMNvD+uDMu3bcaXEUO4tZdlO7cz30="
  />
  
  

  <meta property="og:title" content="Project Part 1" />
<meta property="og:description" content="Locomotion technique: Teleportation ball" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://lbertrand417.github.io/IGD301-blog/blog/project_part1/" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2022-01-09T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-01-09T00:00:00+00:00" />


  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Project Part 1"/>
<meta name="twitter:description" content="Locomotion technique: Teleportation ball"/>

  <meta itemprop="name" content="Project Part 1">
<meta itemprop="description" content="Locomotion technique: Teleportation ball"><meta itemprop="datePublished" content="2022-01-09T00:00:00+00:00" />
<meta itemprop="dateModified" content="2022-01-09T00:00:00+00:00" />
<meta itemprop="wordCount" content="921">
<meta itemprop="keywords" content="Locomotion,VR,ball,teleportation," />
</head>
<body class="dark:bg-gray-800 dark:text-white relative flex flex-col min-h-screen"><header class="container flex justify-around md:justify-between gap-4 flex-wrap p-6 mx-auto">
  <a href="https://lbertrand417.github.io/IGD301-blog/" class="capitalize font-extrabold text-2xl">
    IGD301 - Blog
  </a>
  <ul class="flex items-center gap-4 lg:gap-6">

    
    <li><a href="/IGD301-blog/blog">Blog</a></li>
    
    <li><a href="/IGD301-blog/page/about/">About</a></li>
    
    <li><a href="/IGD301-blog/tags">Tags</a></li>
    

    

    
    <li class="grid place-items-center">
      <span class="open-search inline-block cursor-pointer">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" stroke-width="1.5"
          stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none" />
          <circle cx="10" cy="10" r="7" />
          <line x1="21" y1="21" x2="15" y2="15" />
        </svg>
      </span>
    </li>
    

    
    <li class="grid place-items-center">
      <span class="toggle-dark-mode inline-block cursor-pointer">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5"
          stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none" />
          <circle cx="12" cy="12" r="3" />
          <line x1="12" y1="5" x2="12" y2="5.01" />
          <line x1="17" y1="7" x2="17" y2="7.01" />
          <line x1="19" y1="12" x2="19" y2="12.01" />
          <line x1="17" y1="17" x2="17" y2="17.01" />
          <line x1="12" y1="19" x2="12" y2="19.01" />
          <line x1="7" y1="17" x2="7" y2="17.01" />
          <line x1="5" y1="12" x2="5" y2="12.01" />
          <line x1="7" y1="7" x2="7" y2="7.01" />
        </svg>
      </span>
    </li>
    
  </ul>
</header><main class="flex-1">
  
  

  
  <div class="relative max-w-5xl mx-auto px-4">
    <img src="http://lbertrand417.github.io/IGD301-blog/thumbnail_project1.png" class="rounded-lg shadow-sm w-full object-contain" />
    <div class="absolute top-4 right-8 rounded shadow bg-white text-gray-900 dark:bg-gray-900 dark:text-white px-2 py-0.5">
      
  
    January 9, 2022
  


    </div>
  </div>
  

  <article class="prose lg:prose-lg mx-auto my-8 dark:prose-dark px-4">

    <h1 class="text-2xl font-bold mb-2">Project Part 1</h1>
    <h5 class="text-sm flex items-center">
      <svg xmlns="http://www.w3.org/2000/svg" class="mr-1" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
        <rect x="4" y="5" width="16" height="16" rx="2" />
        <line x1="16" y1="3" x2="16" y2="7" />
        <line x1="8" y1="3" x2="8" y2="7" />
        <line x1="4" y1="11" x2="20" y2="11" />
        <rect x="8" y="15" width="2" height="2" />
      </svg>
      Posted on 
  
    January 9, 2022
  


      
        &nbsp;&bull;&nbsp;
      
      <svg xmlns="http://www.w3.org/2000/svg" class="mr-1" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
        <circle cx="12" cy="12" r="9" />
        <polyline points="12 7 12 12 15 15" />
      </svg>
      5&nbsp;minutes
      &nbsp;&bull;
      <svg xmlns="http://www.w3.org/2000/svg" class="mx-1" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
        <path d="M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0" />
        <path d="M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0" />
        <line x1="3" y1="6" x2="3" y2="19" />
        <line x1="12" y1="6" x2="12" y2="19" />
        <line x1="21" y1="6" x2="21" y2="19" />
      </svg>
      921&nbsp;words
      
    </h5>

    <p>It&rsquo;s time to start the project. As described previously in lab 3, I have chosen to implement the teleportation ball as my locomotion technique.
Even if I know that this locomotion technique is not the most adapted for the parkour provided by the teachers I still chose to make my tests by using it.</p>
<p>The first step was to import the project. I didn&rsquo;t encounter any problems, I simply followed the teacher&rsquo;s tutorial. As for the Roll-a-ball project,
I use my phone cable to connect the headset with my computer.</p>
<p>Initially, I wanted to not use any buttons when throwing the ball. But I had no idea how to handle the break point of contact between the hand and the ball.
That&rsquo;s why I changed my plans and decided to use the trigger. The idea is to hold the trigger down when you start the throwing motion and then release the trigger
at the point of contact break. I could have opted for a movement where the user just presses the trigger at the breakpoint but I found the method
I opted for much more natural and easy to use (even if it seems more restrictive at first).</p>
<p>The main goal was to be able to throw a ball. For this, I used the Unity Grabber and Grabbable scripts. Thanks to this, I could catch a ball and throw it.
However, this was not exactly what I needed because I wanted the ball to be already in my hand, to be thrown and then to come back automatically to my hand.
That&rsquo;s why I removed the Grabber and Grabbable and instead used something similar to MySelect.cs that we created in the Roll-a-ball TP.</p>
<p>Initially, I wanted to reuse the MySelect.cs script as is because the principle was the same, but with this code the ball appeared well below the controller.
I thought it might have been a problem with the anchor points or something similar so I adapted the OVRGrabber code to my problem instead. I got the parts I was interested in
(attaching and detaching the ball) and integrated it into my MySelect.cs. Here is the code I used to attach the ball to the Controller.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#ff79c6">private</span> Vector3 m_anchorOffsetPosition;
<span style="color:#ff79c6">private</span> Quaternion m_anchorOffsetRotation;

<span style="color:#ff79c6">private</span> Vector3 m_grabbedObjectPosOff;

<span style="color:#ff79c6">protected</span> <span style="color:#ff79c6">virtual</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">Awake</span>()
{
	m_anchorOffsetPosition <span style="color:#ff79c6">=</span> transform.localPosition;
	m_anchorOffsetRotation <span style="color:#ff79c6">=</span> transform.localRotation;
}

<span style="color:#ff79c6">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">AttachBall</span>()
{
	ball.transform.parent <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">this</span>.transform;

	Vector3 relPos <span style="color:#ff79c6">=</span> ball.transform.position <span style="color:#ff79c6">-</span> transform.position;
	relPos <span style="color:#ff79c6">=</span> Quaternion.Inverse(transform.rotation) <span style="color:#ff79c6">*</span> relPos;
	m_grabbedObjectPosOff <span style="color:#ff79c6">=</span> relPos;
	Vector3 grabbablePosition <span style="color:#ff79c6">=</span> transform.position <span style="color:#ff79c6">+</span> transform.rotation <span style="color:#ff79c6">*</span> m_grabbedObjectPosOff;

	ball.transform.localPosition <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> Vector3(<span style="color:#bd93f9">0.0f</span>, <span style="color:#bd93f9">0.0f</span>, <span style="color:#bd93f9">0.0f</span>);
	Rigidbody rb <span style="color:#ff79c6">=</span> ball.GetComponent<span style="color:#ff79c6">&lt;</span>Rigidbody<span style="color:#ff79c6">&gt;</span>();
	rb.position <span style="color:#ff79c6">=</span> grabbablePosition;
	rb.isKinematic <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">true</span>;
	rb.useGravity <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">false</span>;
	rb.velocity <span style="color:#ff79c6">=</span> Vector3.zero;
	rb.angularVelocity <span style="color:#ff79c6">=</span> Vector3.zero;
}
</code></pre></div><p>And here is the code used to detach the ball to the Controller when throwing the ball.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++">ball.transform.parent <span style="color:#ff79c6">=</span> null;
Rigidbody rb <span style="color:#ff79c6">=</span> ball.GetComponent<span style="color:#ff79c6">&lt;</span>Rigidbody<span style="color:#ff79c6">&gt;</span>();
rb.useGravity <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">true</span>;
rb.isKinematic <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">false</span>;

OVRPose localPose <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> OVRPose { position <span style="color:#ff79c6">=</span> OVRInput.GetLocalControllerPosition(controller), orientation <span style="color:#ff79c6">=</span> OVRInput.GetLocalControllerRotation(controller) };
OVRPose offsetPose <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> OVRPose { position <span style="color:#ff79c6">=</span> m_anchorOffsetPosition, orientation <span style="color:#ff79c6">=</span> m_anchorOffsetRotation };
localPose <span style="color:#ff79c6">=</span> localPose <span style="color:#ff79c6">*</span> offsetPose;

OVRPose trackingSpace <span style="color:#ff79c6">=</span> transform.ToOVRPose() <span style="color:#ff79c6">*</span> localPose.Inverse();
Vector3 linearVelocity <span style="color:#ff79c6">=</span> trackingSpace.orientation <span style="color:#ff79c6">*</span> OVRInput.GetLocalControllerVelocity(controller);
Vector3 angularVelocity <span style="color:#ff79c6">=</span> trackingSpace.orientation <span style="color:#ff79c6">*</span> OVRInput.GetLocalControllerAngularVelocity(controller);
rb.velocity <span style="color:#ff79c6">=</span> linearVelocity;
rb.angularVelocity <span style="color:#ff79c6">=</span> angularVelocity;
</code></pre></div><p>As you can see, it&rsquo;s still similar to the original MySelect.cs script.</p>
<p>Now, the ball appears immediately in your hand and you can throw it. However you can&rsquo;t teleport yet. To add it, it&rsquo;s quite simple since you just have to move the user&rsquo;s
camera to the current location of the ball. However, I encountered a problem with the y-axis component. Indeed, initially I had written</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#ff79c6">this</span>.transform.position <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> Vector3(currentBall.transform.position.x, <span style="color:#ff79c6">this</span>.transform.position.y, currentBall.transform.position.z);
</code></pre></div><p>but the problem is that the ground is not always flat, however in my current formula the height remains constant. So I changed it to the following line</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#ff79c6">this</span>.transform.position <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> Vector3(currentBall.transform.position.x, currentBall.transform.position.y <span style="color:#ff79c6">+</span> <span style="color:#ff79c6">this</span>.transform.position.y, currentBall.transform.position.z);
</code></pre></div><p>This way, the change in height of the ground is taken into account in the y-axis component of the ball. Then, you just have to attach the ball to the controller
using the same code as before.</p>
<p>I explained earlier that it&rsquo;s enough to teleport the user to the arrival point of the ball, but when is the ball considered to have arrived?
Indeed, I noticed that the ball never stops completely. So I added a threshold at 0.8. When the ball is not attached to the controller and its speed is lower than this threshold,
I consider that it has reached its arrival point and then I teleport the user. Note that this is only valid for the petanque ball since the sticky ball will have
to stop at the point of contact directly.</p>
<p>Well, now we have a good base since we can throw a ball and teleport. However, while testing I noticed that the ball collides with the box Collider which surrounds
the start panel (and consequently the stages and end panels). To prevent this from happening, I created an Uncollide layer that I associated to the GameObject that contains the banner
as well as a Ball layer associated to my ball, and I disabled the interactions between these 2 layers. Now the ball can go through.</p>
<p><img src="http://lbertrand417.github.io/IGD301-blog/throw_ball_1st_draft.gif" alt="Ball first draft"></p>
<p>This concludes my first session on the project. In the next session I plan to solve other problems I&rsquo;ve noticed: sometimes the ball goes through the ground
(whereas the ground has a collider).</p>
<p><img src="http://lbertrand417.github.io/IGD301-blog/mesh_collider_issue.gif" alt="Mesh collider issue"></p>
<p>Furthermore, it&rsquo;s very hard to start the course because the user has to collide with the banner, and my locomotion technique is a teleportation so
you don&rsquo;t necessiraly go through the collider.</p>
<p><img src="http://lbertrand417.github.io/IGD301-blog/start_issue.gif" alt="Start issue"></p>

  </article><div class="bg-blue-100 dark:bg-gray-900">
  <div class="container px-6 py-12 mx-auto max-w-4xl grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
    <div>
      <div class="text-2xl font-bold mb-2">Follow me</div>
      <p class="opacity-60">I&#39;m an engineer student in computer graphics</p>
    </div>
    <ul class="flex justify-center gap-4">
      
      
      <li>
        <a
          href="https://www.linkedin.com/in/lauriane-b-6b1064152/"
          target="_blank"
          rel="noopener"
          aria-label="LinkedIn"
          class="p-2 inline-block rounded-full border border-transparent text-gray-500 hover:text-gray-800 hover:border-gray-800 cursor-pointer transition-colors dark:text-gray-600 dark:hover:border-gray-300 dark:hover:text-gray-300"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            fill="none"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <rect x="4" y="4" width="16" height="16" rx="2" />
            <line x1="8" y1="11" x2="8" y2="16" />
            <line x1="8" y1="8" x2="8" y2="8.01" />
            <line x1="12" y1="16" x2="12" y2="11" />
            <path d="M16 16v-3a2 2 0 0 0 -4 0" />
          </svg>
        </a>
      </li>
      
      
      
      <li>
        <a
          href="https://github.com/lbertrand417"
          target="_blank"
          rel="noopener"
          aria-label="GitHub"
          class="p-2 inline-block rounded-full border border-transparent text-gray-500 hover:text-gray-800 hover:border-gray-800 cursor-pointer transition-colors dark:text-gray-600 dark:hover:border-gray-300 dark:hover:text-gray-300"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            fill="none"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <path
              d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5"
            />
          </svg>
        </a>
      </li>
      
      
      
      
      
      
    </ul>
  </div>
</div>
    </main><footer class="container p-6 mx-auto flex justify-between items-center">
  <span class="text-sm font-light">
    
    Copyright © 2021 - Lauriane Bertrand · All rights reserved
    
  </span>
  <span onclick="window.scrollTo({top: 0, behavior: 'smooth'})" class="p-1 cursor-pointer">
    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" stroke-width="1.5"
      stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M18 15l-6 -6l-6 6h12" />
    </svg>
  </span>
</footer>

<div class="search-ui absolute top-0 left-0 w-full h-full bg-white dark:bg-gray-800 hidden">
  <div class="container max-w-3xl mx-auto p-12">
    <div class="relative">
      <div class="my-4 text-center text-2xl font-bold">Search</div>

      <span class="p-2 absolute right-0 top-0 cursor-pointer close-search">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5"
          stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none" />
          <line x1="18" y1="6" x2="6" y2="18" />
          <line x1="6" y1="6" x2="18" y2="18" />
        </svg>
      </span>
    </div>

    <input type="search" class="py-2 px-3 w-full dark:text-black border dark:border-transparent"
      placeholder="Enter search query" />

    <div class="search-results text-lg font-medium my-4 hidden">Results</div>
    <ul class="search-list my-2">

    </ul>

    <div class="no-results text-center my-8 hidden">
      <div class="text-xl font-semibold mb-2">No results found</div>
      <p class="font-light text-sm">Try adjusting your search query</p>
    </div>
  </div>
</div>





<script src="https://lbertrand417.github.io/IGD301-blog/js/scripts.min.js"></script>






<script>
  
  const darkmode = document.querySelector('.toggle-dark-mode');
  function toggleDarkMode() {
    if (document.documentElement.classList.contains('dark')) {
      document.documentElement.classList.remove('dark')
      localStorage.setItem('darkmode', 'light')
    } else {
      document.documentElement.classList.add('dark')
      localStorage.setItem('darkmode', 'dark')
    }
  }
  if (darkmode) {
    darkmode.addEventListener('click', toggleDarkMode);
  }

  const isDark = localStorage.getItem('darkmode');
  if (isDark && isDark === 'dark') {
    toggleDarkMode();
  }
</script>
</body>
</html>
